var BOLDGRID=BOLDGRID||{};BOLDGRID.COLOR_PALETTE=BOLDGRID.COLOR_PALETTE||{},BOLDGRID.COLOR_PALETTE.Preview=BOLDGRID.COLOR_PALETTE.Preview||{},function(a){"use strict";var r=BOLDGRID.COLOR_PALETTE.Preview;a(function(){parent.BOLDGRID&&parent.BOLDGRID.COLOR_PALETTE.Modify&&parent.BOLDGRID.COLOR_PALETTE.Modify.text_area_val&&r.update_css(parent.BOLDGRID.COLOR_PALETTE.Modify.text_area_val)}),r.updateOverlayColors=function(){var o=a('[class*="-background-color"]'),e=a("[data-bg-overlaycolor-class]"),t=a('[class*="fwr-"]'),s={"color-1-raw":a(":root").css("--color-1-raw"),"color-2-raw":a(":root").css("--color-2-raw"),"color-3-raw":a(":root").css("--color-3-raw"),"color-4-raw":a(":root").css("--color-4-raw"),"color-5-raw":a(":root").css("--color-5-raw"),"color-neutral-raw":a(":root").css("--color-neutral-raw")};o.each((o,e)=>{var t=a(e).attr("data-bg-uuid");a(`#${t}-inline-css`).each((a,o)=>{r.updateBgColorOverlays(o,s)})}),e.each((a,o)=>{r.updateImageOverlays(o,s)}),t.each((o,e)=>{var t="fwr-"+a(e).attr("class").match(/fwr-?(\d+)/)[1];a(`#${t}-inline-css`).each((a,o)=>{r.updateBgColorOverlays(o,s)})})},r.updateImageOverlays=function(r,o){var e=a(r),t=e.attr("style"),s=e.attr("data-bg-overlaycolor-class"),c=o[`color-${s}-raw`],l=`var(--color-${s}-raw)`,n=t.match(new RegExp(c,"g"));n||(c=c.replace(/\s/g,""),n=t.match(new RegExp(c,"g"))),e.attr("style",t.replace(new RegExp(c,"g"),l))},r.updateBgColorOverlays=function(r,o){var e=a(r),t=e.html();_.each(o,(a,r)=>{t=t.replace(new RegExp(a,"g"),`var(--${r})`)}),e.html(t)},r.update_css=function(r){var o,e,t,s;r&&(e=JSON.parse(r),s=parent.BOLDGRID.COLOR_PALETTE.Modify,t=_.isArray(s.body_classes)?s.body_classes.join(" "):"",a("body:not(."+e.state["active-palette"]+")").removeClass(t).addClass(e.state["active-palette"]),(o=document.getElementById("boldgrid-color-palettes-inline-css"))?o.innerHTML=":root{"+s.css_variables+"}":a("head").append('<style id="boldgrid-color-palettes-inline-css" type="text/css">:root{'+s.css_variables+"}</style>"))},wp.customize("boldgrid_color_palette",function(a){a.bind(r.update_css),a.bind(function(){parent.BOLDGRID.COLOR_PALETTE.Modify.$compiled_css_control.val(parent.BOLDGRID.COLOR_PALETTE.Modify.compiled_css).change()}),r.updateOverlayColors()}),wp.customize("boldgrid_compiled_css",function(a){a.bind(function(){BoldGrid.common.forms(!0)})})}(jQuery);