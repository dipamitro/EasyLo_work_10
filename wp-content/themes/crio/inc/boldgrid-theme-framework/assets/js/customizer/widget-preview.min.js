var BOLDGRID=BOLDGRID||{};BOLDGRID.CUSTOMIZER=BOLDGRID.CUSTOMIZER||{},function(e){"use strict";BOLDGRID.CUSTOMIZER.WidgetPreview={};var i=BOLDGRID.CUSTOMIZER.WidgetPreview;i.hover_bound=!1,i.section_click_bound=!1,e(function(){e(window).on("boldgrid_customizer_refresh",onload)}),onload=function(){i.section_selector=a(),wp.customizer&&(i.$previewer=e(wp.customize.previewer.container).find("iframe").last().contents(),o(),t(),i.$widget_overlay=e('<div id="boldgrid-widget-area-overlay" class="widget-area-overlay hidden"><h2>Widget Area</h2></div>'),i.$previewer.find("body").find("#boldgrid-widget-area-overlay").length||i.$previewer.find("body").append(i.$widget_overlay),i.$widget_overlay=i.$previewer.find("body").find("#boldgrid-widget-area-overlay"))};var t=function(){!0!==i.section_click_bound&&(e(i.section_selector).on("click",function(){d(),i.$previewer.find("[data-widget-area][data-empty-area]").css({width:"",height:""})}),i.section_click_bound=!0)},o=function(){i.section_selector&&!1===i.hover_bound&&(i.hover_bound=!0,e(i.section_selector).hoverIntent(function(){if(i.complete_event=!0,!e(this).hasClass("open")){var t=i.$previewer.find('[data-widget-area="'+this.id+'"]');t.is(":visible")&&t.length&&(t.attr("data-empty-area")&&(t.css({width:"100%",height:"50px"}),i.$widget_overlay.find("h2").prepend('<span class="empty-phrase-heading">Empty <span>'),i.$widget_overlay.addClass("empty-widget-area")),r(t))}},function(){if(!1!==i.complete_event){i.complete_event=!1;var e=i.$previewer.find('[data-widget-area="'+this.id+'"]');e.is(":visible")&&e.length&&(e.attr("data-empty-area")&&e.css({width:"",height:""}),d())}}))},d=function(){i.$widget_overlay.find(".empty-phrase-heading").remove(),i.$widget_overlay.addClass("hidden").removeClass("empty-widget-area")},r=function(t){var o,d=t[0].getBoundingClientRect(),r=t.outerHeight(!0),a=t.outerWidth(!0);t.find("*").each(function(){var i=e(this),t=i.outerHeight(!0),o=i.outerWidth(!0);t>r&&(r=t),o>a&&(a=o)}),i.$widget_overlay.css({width:d.width,height:r,left:t.offset().left,top:t.offset().top}).removeClass("hidden"),o=t.offset().top-65,wp.customize("bgtfw_fixed_header")()&&"header-top"===wp.customize("bgtfw_header_layout_position")()&&(o-=i.$previewer.find(".bgtfw-header-stick").outerHeight()),i.$previewer.find("html, body").stop().animate({scrollTop:o},750)},a=function(){if(void 0!==wp.customize.panel("widgets")){var i=wp.customize.panel("widgets").sections(),t="",o=!0;return e.each(i,function(){!1===o&&(t+=","),t+="#accordion-section-"+this.id+":not(.open)",o=!1}),t}}}(jQuery);